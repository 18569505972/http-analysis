# http-analysis
http知识梳理
## web构建技术
•html：页面文本标记语言  
•http：文档传输协议  
•URL：统一资源定位符  
## TCP/IP四层结构
### 应用层
决定向用户提供服务时通信的活动。  
包含：  
•FTP：文件传输协议。  
•DNS：域名系统。  
等，HTTP也属于此层。
#### DNS
负责通过域名查找IP地址或通过IP地址反向查找域名的服务。
### 传输层
提供网络连接中计算机之间的通信。  
•TCP：传输控制协议。  
•UDP：用户数据报协议。 
#### TCP协议  
TCP协议主要提供字节流服务，将大块数据分割成以报文段为单位的数据包，并能够将所传输的信息准确的合成完整的信息给接收方。  
TCP三次握手：发送方发送一个带有SYN标志的数据包给对方，接收方收到后回传一个带有SYN/ACK标志的数据包给发送方，告知发送方收到数据，最后发送方再发送一个带ACK标志的数据包给接收方，告知“握手结束”。
### 网络层  
用来处理网络上流动的数据包，规定通过何种传输线路向目标传送数据包。（数据包为网络传输最小数据单位）  
•IP：网际协议。  
#### IP协议 
IP协议保证正确传输的两个条件。  
•IP地址：指明节点被分配的地址。  
•MAC地址：指网卡所属的固定地址。   
IP地址可以和MAC地址进行配对，IP地址可变换，MAC地址基本上不会更改。IP间的通信依赖MAC地址。  
通常通信需要经过多个计算机或网络设备的中转才能进行连接，中转时会利用下一站中转设备的MAC地址搜索目标。  
而通过ARP协议，利用接收方的IP地址，就可以反向查到接收方的MAC地址。  
### 数据链路层  
用来处理连接网络的硬件部分。 
## 数据传输流程
没通过一层结构会被打上该层所属首部信息，这种数据包装起来的做法被称作封装。  

![](./images/translate.jpg)

### URL与URI
•URL：统一资源定位符，web网页地址。  
•URI：统一资源标识符，URI用字符串标识某一资源，URL则标识资源的位置，URI包含URL。   
## HTTP协议
无状态协议，自身不对请求和响应之间的通信状态进行保存。
### 作用：
使用URI定位互联网资源，实现客户端与服务端的通信。也可以通过‘*’来代替请求URI，实现对服务器本身的请求。
```
OPTIONS * HTTP/1.1
```
### HTTP请求方法
•GET：请求访问已被URI识别的资源。   
•POST：安全传输主体实体。   
•PUT：传输文件，但由于自身不带验证机制，任何人都可上传，存在安全性问题。  
•HEAD：获取报文首部，用于确认URI有效性以及资源更新日期时间等。   
•DELETE：删除文件，但由于自身不带验证机制，存在安全性问题。  
•OPTIONS：查询针对请求URI指定的资源支持的方法。   
•TRACE：追踪路径，客户端通过TRACE方法可以查询发送出的请求是怎样被加工修改。请求想要连接到服务器会通过代理中转，TRACE方法可以确认连接过程中发生的操作。     
•CONNECT：要求代理服务器通信时建立隧道，使用SSL和TLS协议把通信内容加密后经网络隧道传输。   
### keep-alive（HTTP长连接）
无长连接时每次请求都会造成无谓的TCP连接建立和断开，增加通信开销。使用长连接后只要一端没有提出断开连接，则保持TCP连接状态。而且长连接使多个请求可以管线式发送，不用等待响应，便可并行发送请求。 
### Cookie（HTTP状态保存）
使用Cookie会根据服务端响应报文中的Set-Cookie首部字段，通知客户端保存Cookie。当客户端再次发送请求时，客户端会自动在请求报文中添加Cookie值发送出去。
### HTTP编码
通过传输编码，能提升HTTP传输速率。
#### 内容编码
应用于实体内容的编码格式，使实体信息原样压缩。编码后的实体由客户端接收并负责解码。  
常见内容编码：gzip、compress、deflate、identity。
#### 分割传输编码
传送大数据时，将实体主体分成多个块进行传输，让浏览器逐步显示页面。
### 请求报文
由请求方法、请求URI、协议版本、可选的请求报文首部字段和请求报文实体。
```
/*
 GET：请求服务器的方法
 /index.html：访问资源，请求URI
 HTTP/1.1：HTTP版本号
 */ 
GET /index.html HTTP/1.1
```
### 响应报文
由版本协议、状态码、状态码的原因短语、响应报文首部以及响应主体构成。
```
/*
 HTTP/1. 
 200：状态码
 OK：状态码原因短语
 */
HTTP/1.1 200 OK
```